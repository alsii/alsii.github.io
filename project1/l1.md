---
layout: default
published: true
---
# Использование PHP

## Задание

Числа от 1 до 100 раместить в виде таблицы размером 10х10 клеток.
Границы между ячейками в 1 пиксель толщиной, желтого цвета.
Цвет, размер и шрифт, которым написаны числа - по усмотрению.
У строк должен чередоваться фон в порядке: белый-синий-красный.
В четных столбцах числа должны быть выделены жирным шрифтом.
Числа, которые делятся на 5 выделить зеленым цветом, которые делятся на 7 - курсивом.

## Решение

### Таблица стилей

Чтобы управлять внешним видом ячеек таблицы сформируем таблицу стилей. Стили назовем используя осмысленные обозначения, чтобы затем можно было просто менять оформление нашей таблицы.

~~~ css
.row0 {
  background-color: white; /* строка 0 */
}
.row1 {
  background-color: lightblue;  /* строка 1 */
}
.row2 {
  background-color: lightred;  /* строка 2 */
}
.col-even {
  font-weight: bold;  /* четные столбцы */
}
.x5 {
  color: green;  /* число делится на 5 */
}
.x7 {
  font-style: italic;  /* число делится на 7 */
}
~~~

Сохраним нашу таблицу стилей в файл `style.css`. Затем мы сможем использовать его в нашей программе.

### Заготовка HTML-страницы

В результате работы нашей программы должна получиться cтраница на HTML. Создадим заготовку нашей страницы, в которую затем поместим текст нашего PHP-скрипта.

~~~ html
<!DOCTYPE html>
<html>
    <head>
        <link href="style.css" rel="stylesheet">
        <title>Color Table</title>
        <?php
        ?>
    </head>
    <body>
        <h1>Colot Table</h1>
    </body>
</html>
~~~

Скрипт будет размещаться меджу <?php и ?>

### Подготовим таблицу

Для вывода таблицы используем два вложеных цикла `for`. Внешний цикл формирует строки таблицы, внутренний - ячейки в строках, из которыз образуются столбцы. Для вывода HTML используем `echo`.

~~~ php
<?php

define(ROWS, 10);
define(COLS, 10); 

echo "<table border=\"1\">\n";

for ($tr = 1; $tr <= ROWS; $tr++){ 
  echo "<tr>\n";
    for ($td = 1; $td <= COLS; $td++){
      $value = tr*td;
      echo "<td>$value</td>";
    }
    echo "</tr>\n";
}
echo "</table>\n";
?>
~~~

### Раскрашивание строк

Для раскрашивания строк применим один из созданных нами стилей к соответствующим строкам таблицы. Для этого добавим в тег `<tr>` атрибут `class` со значением, соответствующим нужному стилю. Для определения нужного стиля используем оператор `%` (остаток от деления). Для выбора нужного значения используем автоматическое преобразование числовых значений в соответствующие строки при использовании оператора `.` (конкатенация строк). В результате наша программа будет выглядеть так:

~~~ php
<?php

define(ROWS, 10);
define(COLS, 10); 

echo "<table border=\"1\">\n";

for ($tr = 1; $tr <= ROWS; $tr++){ 
    echo "<tr>\n";

    $trClass = "row" . ($tr % 3);

    echo "<tr class=\"$trClass\">\n";
    for ($td = 1; $td <= COLS; $td++){
      $value = tr*td;
      echo "<td>$value</td>";
    }
    echo "</tr>\n";
}
echo "</table>\n";
?>
~~~

### Выделение четных столбцов

Для выделения четных столбцов будем добавлять атрибут `class` со значением, соответствующим нужному стилю в тег `<td>`. Используем те же приемы, что мы использовали для строк таблицы. В результате получим:

~~~ php
<?php

define(ROWS, 10);
define(COLS, 10); 

echo "<table border=\"1\">\n";
echo "<tr>\n";

for ($tr = 1; $tr <= ROWS; $tr++){ 

    $trClass = "row" . ($tr % 3);

    echo "<tr class=\"$trClass\">\n";
    for ($td = 1; $td <= COLS; $td++){
        $value = tr*td;
        
        if(0 == $td % 2) {
            $tdClass = "col-even";
        }
      
      echo "<td class=\"$tdClass\">$value</td>";
    }
    echo "</tr>\n";
}
echo "</table>\n";
?>
~~~

### Предварительные итоги

Наша программа выполняет два из пяти заданий. Посмотрим, однако на HTML-текст, который получается в результате ее выполнения. Для нечетных столбцов тег `<tr>` выглядит следующим образом:

~~~ html
<tr class="">
~~~

хотя этот тег отображается корректно, хотелось бы избавиться от атрибута `class` с пустым значением. Добавим дополнительную проверку:

~~~ php
<?php

define(ROWS, 10);
define(COLS, 10); 

echo "<table border=\"1\">\n";
echo "<tr>\n";

for ($tr = 1; $tr <= ROWS; $tr++){ 

    $trClass = "row" . ($tr % 3);

    echo "<tr class=\"$trClass\">\n";
    for ($td = 1; $td <= COLS; $td++){
        $value = tr*td;
        
        if(0 == $td % 2) {
            $tdClass = "col-even";
        }
      
        if("" != $tdClass) {
          $tdClass = "class=\"$tdClass\"";
        }
        echo "<td$tdClass>$value</td>";
    }
    echo "</tr>\n";
}
echo "</table>\n";
?>
~~~

На что нужно обратить внимание:

* Мы сохраняем значение, полученное с помощью переменной `$tdClass` обратно в эту же переменную. Ничего удивительного в этом нет, так же мы поступаем когда пишем, например, `$i = $i + 5`. Просто в данном случае переменная у нас содержит строковое значение и используется операция подстановки в строку `"class=\"$tdClass\""`. Символы обратного слеша используются для экранирования двойных кавычек.
* В функции echo также используется операция в строку, только подставляются значения двух переменных.

Теперь теги `<tr>` в нечетных строках таблицы не содержат "пустого" атрибута, что нам и было нужно. Можно двигаться дальше.

### Раскрашиваем числа кратные пяти

При выполнении этой задачи мы обнаружим, что в некоторых случаях нам необходимо присвоить одному тегу несколько классов CSS. Атрибут `class` в этом случае должен выглядеть следующим образом `class="class1 class2"`. Напрашивется следующее решение:










